<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN"><html><head><meta http-equiv="content-type" content="text/html;charset=utf-8"></meta><link rel="stylesheet" type="text/css" href="v8help://service_book/service_style"></link></head><body>
<div>
<h1 style="font-size: 17.920000076293945px;">Обработка "Выгрузка и загрузка данных XML"</h1>
<h2 style="font-size: 15.680000305175781px;">Режимы работы</h2>
<p>Обработка реализует 2 режима работы: Выгрузки (создание файла выгрузки указанных пользователем данных) и Загрузки (чтение файла выгрузки, созданного одноименным режимом, и запись имеющихся в нем данных). Установка режима осуществляется выбором в поле Режим. Кроме того режим загрузки разделен на три различных режима по типу загрузки предопределенных данных.</p>
<p>Перед запуском того или иного режима (нажатие кнопки Выполнить) нужно указать имя файла выгрузки либо введя его вручную в поле "Имя файла", либо воспользовавшись кнопкой выбора этого поля и стандартным диалогом выбора файла.</p>
<p>В режиме загрузки имеется возможность редактирования использования итогов при записи регистров, что может повлиять на скорость загрузки.</p>
<p>Кнопки "Отключить итоги" и "Включить итоги" доступны при установленном флаге "Включить возможность редактирования использования итогов во время загрузки данных" и используются для ручного управления режимом использования итогов при загрузке данных. </p>
<div><span style="font-size: 15.680000305175781px; font-weight: bold;">Условия применимости обработки</span></div>
<p>Обработка может использоваться только в тех случаях, когда информационная база, в которой осуществлялась выгрузка данных, и та, в которой данные загружаются, являются однородными (конфигурации идентичны, данные могут различаться), либо все выгружаемые объекты практически полностью идентичны по составу и типам реквизитов и табличных частей, свойствам "ведущего" объекта метаданных и т.д. Следует отметить, что, в связи с указанными ограничениями, обработка главным образом предназначена для обмена между однородными ИБ.</p>
<p>Формат файла выгрузки отличается от формата файла, создаваемого при выгрузке по плану обмена, заголовочной частью. Для выгрузки данных (элементов справочников, наборов записей регистров и т.д.) обработкой используется тот же механизм XML-сериализации, что и выгрузкой по планам обмена, в этой части форматы файлов идентичны.</p>
<div><span style="font-size: 15.680000305175781px; font-weight: bold;">Определение состава выгрузки</span></div>
<p>Обработка позволяет осуществить как полную, так и частичную выгрузку данных информационной базы в файл. Настройка состава выгружаемых данных производится в диалоге путем установки флажков в колонке дерева, отображающего объекты метаданных, данные по которым могут быть выгружены. Дополнительная колонка флажков, "При необходимости", устанавливает необходимость выгрузки объектов данного типа "по ссылке". То есть, если флажок установлен только в колонке "При необходимости", то данные по такому объекту будут выгружаться не полностью, а только в том объеме, который необходим для поддержания ссылочной целостности в информационной базе, которая будет загружать файл выгрузки.</p>
<p>При открытии формы обработка устанавливает признак выгрузки по ссылке всем объектам, что гарантирует ссылочную целостность выгруженного фрагмента информационной базы. </p>
<p>При нажатии на кнопку "Определить данные, выгружаемые по ссылке" обработка анализирует, ссылки на какие данные могут содержаться в объектах, у которых установлен признак полной выгрузки, и автоматически заполняет колонку флажков, индицирующих необходимость выгрузки по ссылке. Если объект уже имеет установленный флажок полной выгрузки, в таком случае флажок выгрузки по ссылке не устанавливается.</p>
<p>В составе выгрузки имеется возможность произвести различные многоуровневые отборы в том числе по раскрываемым ссылкам, скопировать отборы, сделать индивидуальные отборы для определенных элементов конфигурации.</p>
<p><font size="3"><b>Режим загрузки - для предопределенных данных</b></font></p>
<p>Режим загрузки разделен на три типа:</p>
<p>1. Подменяем ссылки на предопределённые элементы теми которые уже существуют в базе.  (Стандартный режим)  Алгоритм работы при выборе данного режима следующий -  Обрабатывается файл загрузки и базы данных в которую производится загрузка, формируется таблица соответствия предопределенных элементов старой и новой базы, делается копия исходного файла загрузки (временный файл) и в нем производится замена идентификаторов предопределенных элементов, далее уже этот временный файл загружается в базу данных. Главным условием корректной работы является наличие самих предопределенных элементов в выгрузке (Режим выгружать при необходимости).</p>
<p>2. Удаление предопределенных  и загрузка новых из файла источника. В данном режиме подмены идентификаторов предопределенных элементов не производится, но производится непосредственное удаление  выгружаемого предопределенного элемента и создание нового с идентификатором из базы выгрузки. Этим режимом можно пользоваться если вы производите выгрузку в пустую базу, а не в ту в которой ведется учет, так как имеется возможность возникновения битых ссылок "&lt;Объект не найден&gt;". Этот режим загрузки требует модификации типовых конфигураций для разрешения удалять предопределенные.  Режим создан для необходимости в некоторых случаях совместить идентификаторы различных баз.</p>
<p>3. Быстрая загрузка без удаления предопределенных. (Возможно возникновение дублирования предопределенных). В этом режиме чтение осуществляется один раз, что удобно при выгрузке- загрузке больших много-гигабайтных баз, но предполагается что пользователь самостоятельно предварительно удаляет предопределенные элементы,  либо загружает дублированные элементы для последующей обработки данных (к примеру перенос ссылок обработкой «поиск и замена значений» и удалением старых предопределенных).</p>
<p>Режим создан для больших баз данных для необходимости максимально ускорить именно загрузку данных.</p>
<p><span style="font-size: 17.920000076293945px; font-weight: bold;">Возможные применения</span></p>
<p>Использование этой обработки возможно, например, для создания полной или частичной резервной копии данных, осуществления обмена данными между информационными базами, а также как вспомогательный инструмент при восстановлении проблемных информационных баз.</p></div>


</body></html>